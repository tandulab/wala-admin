<<<<<<<< HEAD:assets/AudienceView44420.js
import{g as I,F as U,u as D,h as P,i as R,k as v,c as F,L as A,m as w,n as V,p as B,s as L,J as z,_ as x,a as h,b as r,w as _,r as u,o as E,q as T,v as O,t as M,y as N,z as G,C as K,d as S,e as q}from"../index44420.js";import{h as $}from"./loader44420.js";const J={setup(){I(()=>{m.value=!0,t.value={first:0,rows:a.value.rows,sortField:null,sortOrder:null,filters:p.value};const e=localStorage.getItem("dt-audiences");if(t.value.page==null&&e){let s=JSON.parse(e);t.value.first=s.first,t.value.page=s.first/t.value.rows}U.register("myfilter",(s,k)=>s===k),i()});const l=D(),n=P(),b=R(),a=v(),p=v({name:{value:"",matchMode:"contains"}}),m=v(!0),t=v(),d=v(0),f=v([{label:"My Filter",value:"myfilter"}]),g=F(()=>l.getters[z.CURRENT_AUDIENCES]);function i(){m.value=!0;const e=new Map;e.set("name",p.value.name.value),e.set("page",t.value.page+1),e.set("per_page",t.value.rows),t.value.sortField&&(t.value.sortOrder==1?e.set("sorted_by",t.value.sortField+"_asc"):e.set("sorted_by",t.value.sortField+"_desc")),setTimeout(()=>{y(e)},Math.random()*1e3+250)}const y=async function(e){try{const s=await l.dispatch(A.FETCH_ALL_AUDIENCES,e);return m.value=!1,s}catch(s){$(l),w(n,s)}},o=async function(e){await l.dispatch(A.DELETE_AUDIENCE,e).then(()=>{L(n,{message:"Audience eliminato correttamente.",title:""}),i()}).catch(s=>{w(n,s)})};return{dt:a,response:g,filters:p,loading:m,totalRecords:d,lazyParams:t,loadLazyData:i,matchModes:f,onPage:e=>{t.value=e,i()},onSort:e=>{t.value=e,i()},onFilter:()=>{t.value.page=0,t.value.filters=p.value,i()},confirmDeleteAudience:(e,s)=>{b.require({target:e.currentTarget,message:"Sei sicuro di voler eliminare questo audience?",icon:"pi pi-info-circle",acceptClass:"p-button-danger",accept:()=>{o(s)}})},toggleEdit:function(e){B.push({name:"dettaglio-audience",params:{id:e.id}})},moment:V}}};function j(l,n,b,a,p,m){const t=u("InputText"),d=u("Column"),f=u("Button"),g=u("DataTable"),i=u("ConfirmPopup"),y=G("tooltip");return E(),h("div",null,[r(g,{value:a.response.audiences,totalRecords:a.response.total,lazy:!0,paginator:!0,rows:10,filters:a.filters,"onUpdate:filters":n[0]||(n[0]=o=>a.filters=o),ref:"dt",dataKey:"id",loading:a.loading,onPage:n[1]||(n[1]=o=>a.onPage(o)),onSort:n[2]||(n[2]=o=>a.onSort(o)),onFilter:n[3]||(n[3]=o=>a.onFilter()),filterDisplay:"row",removableSort:""},{empty:_(()=>[T(" Nessun audience trovato. ")]),default:_(()=>[r(d,{field:"name",header:"Nome",filterMatchMode:"contains",ref:"name",sortable:!0,showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{filter:_(({filterModel:o,filterCallback:c})=>[r(t,{type:"text",modelValue:o.value,"onUpdate:modelValue":C=>o.value=C,onKeydown:O(C=>c(),["enter"]),class:"p-column-filter",placeholder:"Filtra per nome"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1},512),r(d,{field:"company",header:"Azienda",ref:"company",sortable:!0},{body:_(({data:o})=>{var c;return[T(M((c=o.company)==null?void 0:c.name),1)]}),_:1},512),r(d,{header:"",style:{width:"9rem"}},{body:_(({data:o})=>[N(r(f,{type:"button",onClick:c=>a.toggleEdit(o),"aria-haspopup":"true","aria-controls":"overlay_menu",class:"p-button-text p-button-rounded text-300 surface-200 mr-3",icon:"pi pi-pencil",disabled:!o.can_edit},null,8,["onClick","disabled"]),[[y,"Modifica",void 0,{top:!0}]]),N(r(f,{type:"button",onClick:c=>a.confirmDeleteAudience(c,o.id),"aria-haspopup":"true","aria-controls":"overlay_menu",class:"p-button-text p-button-rounded text-300 surface-200",icon:"pi pi-trash",disabled:!o.can_delete},null,8,["onClick","disabled"]),[[y,"Elimina",void 0,{top:!0}]])]),_:1})]),_:1},8,["value","totalRecords","filters","loading"]),r(i)])}const H=x(J,[["render",j]]),Q={setup(){const l=D();return{audiences:F(()=>l.getters[K.CURRENT_CAMPAIGNS])}},components:{AudienceTable:H}},W={class:"flex justify-content-between align-items-center"},X={key:0,class:"uppercase"};function Y(l,n,b,a,p,m){const t=u("Button"),d=u("AudienceTable"),f=u("Card");return E(),h("div",null,[r(f,null,{content:_(()=>[S("div",W,[a.audiences?(E(),h("h1",X,[S("span",null,M(a.audiences.total)+" Audience",1)])):q("",!0),r(t,{label:"Nuovo audience",onClick:n[0]||(n[0]=g=>l.$router.push("/dettaglio-audience"))})]),r(d)]),_:1})])}const ae=x(Q,[["render",Y]]);export{ae as default};
========
import{g as I,F as U,u as D,h as P,i as R,k as v,c as F,L as A,m as w,n as V,p as B,s as L,J as z,_ as x,a as h,b as r,w as _,r as u,o as E,q as T,v as O,t as M,y as N,z as G,C as K,d as S,e as q}from"../index39631.js";import{h as $}from"./loader39631.js";const J={setup(){I(()=>{m.value=!0,t.value={first:0,rows:a.value.rows,sortField:null,sortOrder:null,filters:p.value};const e=localStorage.getItem("dt-audiences");if(t.value.page==null&&e){let s=JSON.parse(e);t.value.first=s.first,t.value.page=s.first/t.value.rows}U.register("myfilter",(s,k)=>s===k),i()});const l=D(),n=P(),b=R(),a=v(),p=v({name:{value:"",matchMode:"contains"}}),m=v(!0),t=v(),d=v(0),f=v([{label:"My Filter",value:"myfilter"}]),g=F(()=>l.getters[z.CURRENT_AUDIENCES]);function i(){m.value=!0;const e=new Map;e.set("name",p.value.name.value),e.set("page",t.value.page+1),e.set("per_page",t.value.rows),t.value.sortField&&(t.value.sortOrder==1?e.set("sorted_by",t.value.sortField+"_asc"):e.set("sorted_by",t.value.sortField+"_desc")),setTimeout(()=>{y(e)},Math.random()*1e3+250)}const y=async function(e){try{const s=await l.dispatch(A.FETCH_ALL_AUDIENCES,e);return m.value=!1,s}catch(s){$(l),w(n,s)}},o=async function(e){await l.dispatch(A.DELETE_AUDIENCE,e).then(()=>{L(n,{message:"Audience eliminato correttamente.",title:""}),i()}).catch(s=>{w(n,s)})};return{dt:a,response:g,filters:p,loading:m,totalRecords:d,lazyParams:t,loadLazyData:i,matchModes:f,onPage:e=>{t.value=e,i()},onSort:e=>{t.value=e,i()},onFilter:()=>{t.value.page=0,t.value.filters=p.value,i()},confirmDeleteAudience:(e,s)=>{b.require({target:e.currentTarget,message:"Sei sicuro di voler eliminare questo audience?",icon:"pi pi-info-circle",acceptClass:"p-button-danger",accept:()=>{o(s)}})},toggleEdit:function(e){B.push({name:"dettaglio-audience",params:{id:e.id}})},moment:V}}};function j(l,n,b,a,p,m){const t=u("InputText"),d=u("Column"),f=u("Button"),g=u("DataTable"),i=u("ConfirmPopup"),y=G("tooltip");return E(),h("div",null,[r(g,{value:a.response.audiences,totalRecords:a.response.total,lazy:!0,paginator:!0,rows:10,filters:a.filters,"onUpdate:filters":n[0]||(n[0]=o=>a.filters=o),ref:"dt",dataKey:"id",loading:a.loading,onPage:n[1]||(n[1]=o=>a.onPage(o)),onSort:n[2]||(n[2]=o=>a.onSort(o)),onFilter:n[3]||(n[3]=o=>a.onFilter()),filterDisplay:"row",removableSort:""},{empty:_(()=>[T(" Nessun audience trovato. ")]),default:_(()=>[r(d,{field:"name",header:"Nome",filterMatchMode:"contains",ref:"name",sortable:!0,showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{filter:_(({filterModel:o,filterCallback:c})=>[r(t,{type:"text",modelValue:o.value,"onUpdate:modelValue":C=>o.value=C,onKeydown:O(C=>c(),["enter"]),class:"p-column-filter",placeholder:"Filtra per nome"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1},512),r(d,{field:"company",header:"Azienda",ref:"company",sortable:!0},{body:_(({data:o})=>{var c;return[T(M((c=o.company)==null?void 0:c.name),1)]}),_:1},512),r(d,{header:"",style:{width:"9rem"}},{body:_(({data:o})=>[N(r(f,{type:"button",onClick:c=>a.toggleEdit(o),"aria-haspopup":"true","aria-controls":"overlay_menu",class:"p-button-text p-button-rounded text-300 surface-200 mr-3",icon:"pi pi-pencil",disabled:!o.can_edit},null,8,["onClick","disabled"]),[[y,"Modifica",void 0,{top:!0}]]),N(r(f,{type:"button",onClick:c=>a.confirmDeleteAudience(c,o.id),"aria-haspopup":"true","aria-controls":"overlay_menu",class:"p-button-text p-button-rounded text-300 surface-200",icon:"pi pi-trash",disabled:!o.can_delete},null,8,["onClick","disabled"]),[[y,"Elimina",void 0,{top:!0}]])]),_:1})]),_:1},8,["value","totalRecords","filters","loading"]),r(i)])}const H=x(J,[["render",j]]),Q={setup(){const l=D();return{audiences:F(()=>l.getters[K.CURRENT_CAMPAIGNS])}},components:{AudienceTable:H}},W={class:"flex justify-content-between align-items-center"},X={key:0,class:"uppercase"};function Y(l,n,b,a,p,m){const t=u("Button"),d=u("AudienceTable"),f=u("Card");return E(),h("div",null,[r(f,null,{content:_(()=>[S("div",W,[a.audiences?(E(),h("h1",X,[S("span",null,M(a.audiences.total)+" Audience",1)])):q("",!0),r(t,{label:"Nuovo audience",onClick:n[0]||(n[0]=g=>l.$router.push("/dettaglio-audience"))})]),r(d)]),_:1})])}const ae=x(Q,[["render",Y]]);export{ae as default};
>>>>>>>> 434b6e1f9c272f7febd6c5513f6c88f03d521cb2:assets/AudienceView39631.js
