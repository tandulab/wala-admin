import{k as f,j as A,u as O,h as L,c as B,z as j,I as D,s as U,m as R,L as P,Q as F,_ as M,a as w,b as l,d as o,w as v,r as c,o as x,v as W,t as q,p as N,x as I,e as Q,K as z,J as K,y as G}from"../index70335.js";import{s as k,h as b}from"./loader70335.js";const H={setup(){const y=f(""),n=f([{label:"Modifica domanda"}]),V=A(),t=O(),d=L(),r=f({}),E=f([]),_=f({icon:"pi pi-home",to:"/dettaglio-template/"+"6d503a06-958b-4f83-af8d-92e39ced2f74"}),u=f(!1),m=B(()=>t.getters[F.CURRENT_QUESTION]),p=async function(){try{const s=await t.dispatch(D.FETCH_QUESTION_DETAIL,V.params.id+"");return g(),s}catch(s){b(t),R(d,s)}},S=async function(){if(e())return;k(t);const s={question:r.value};try{const a=await t.dispatch(D.UPDATE_QUESTION,s);return U(d,{message:"Domanda aggiornata correttamente.",title:""}),b(t),a}catch(a){b(t),R(d,a)}},g=function(){r.value=Object.assign({},m.value)},e=function(){var s,a;return((s=r.value)==null?void 0:s.label_it)==""||((a=r.value)==null?void 0:a.label_it)==null?u.value=!0:u.value=!1,u.value},i=async function(s){if(e())return;k(t);const a={template_questionnaire_id:"6d503a06-958b-4f83-af8d-92e39ced2f74",answer:s};try{const T=await t.dispatch(P.UPDATE_ANSWER,a);return U(d,{message:"Risposta aggiornata correttamente.",title:""}),p(),b(t),T}catch(T){b(t),R(d,T)}},h=s=>{let{newData:a,index:T}=s;i(a)};return j(async()=>{y.value=V.params.id+"",y.value!=""&&p()}),{question_detail:m,home:_,items:n,tmp_question:r,invalid_label_it:u,editingRows:E,updateQuestion:S,validateLabel:e,onRowEditSave:h}},components:{}};const J={class:"m-4"},X={class:"flex flex-wrap"},Y={class:"col-6 flex-1"},Z=o("div",{class:"flex align-items-center justify-content-between"},[o("h1",null,"DOMANDA")],-1),$={class:"formgrid grid col-12 flex flex-column"},tt={class:"field"},et=o("label",{for:"note"},"Domanda",-1),ot={class:"field flex flex-column"},lt=o("label",{for:"note"},"Titolo",-1),st={class:"field flex flex-column"},nt=o("label",{for:"note"},"Suggerimento",-1),at={class:"flex justify-content-end"},it={class:"col-6 flex-1"},ct={class:"flex flex-column preview"},dt=o("h1",null,"PREVIEW",-1),rt={class:"mb-0"},_t={class:"mt-2"},ut={key:0,class:"pi pi-info-circle"},mt={key:0,class:"pi pi-info-circle"},pt={class:"col-12"},ft=o("div",{class:"flex align-items-center justify-content-between"},[o("h1",null,"RISPOSTE")],-1),vt={class:"formgrid grid col-12 flex flex-column"};function ht(y,n,V,t,d,r){const E=c("Breadcrumb"),C=c("Textarea"),_=c("InputText"),u=c("Button"),m=c("Card"),p=c("Column"),S=c("DataTable"),g=G("tooltip");return x(),w("div",J,[l(E,{home:t.home,model:t.items,class:"mb-3 mt-0 pt-0"},null,8,["home","model"]),o("div",X,[o("div",Y,[l(m,{class:"h-full"},{content:v(()=>[Z,o("div",$,[o("div",tt,[et,l(C,{id:"note",modelValue:t.tmp_question.label_it,"onUpdate:modelValue":n[0]||(n[0]=e=>t.tmp_question.label_it=e),rows:"5",cols:"30",class:W(["w-full",{"p-invalid":t.invalid_label_it}]),onChange:t.validateLabel},null,8,["modelValue","class","onChange"])]),o("div",ot,[lt,l(_,{type:"text",modelValue:t.tmp_question.title_it,"onUpdate:modelValue":n[1]||(n[1]=e=>t.tmp_question.title_it=e),class:"p-column-filter"},null,8,["modelValue"])]),o("div",st,[nt,l(_,{type:"text",modelValue:t.tmp_question.tooltip_it,"onUpdate:modelValue":n[2]||(n[2]=e=>t.tmp_question.tooltip_it=e),class:"p-column-filter"},null,8,["modelValue"])])]),o("div",at,[l(u,{label:"Salva",onClick:t.updateQuestion},null,8,["onClick"])])]),_:1})]),o("div",it,[l(m,{class:"h-full"},{content:v(()=>[o("div",ct,[dt,o("h3",rt,q(t.tmp_question.title_it),1),o("h4",_t,[N(q(t.tmp_question.label_it)+" ",1),t.tmp_question.tooltip_it?I((x(),w("i",ut,null,512)),[[g,t.tmp_question.tooltip_it,void 0,{top:!0}]]):Q("",!0)]),(x(!0),w(z,null,K(t.tmp_question.answers,e=>(x(),w("p",{key:e.id,class:"mb-0"},[N(q(e.label_it)+" ",1),e.tooltip_it?I((x(),w("i",mt,null,512)),[[g,e.tooltip_it,void 0,{top:!0}]]):Q("",!0)]))),128))])]),_:1})])]),o("div",pt,[l(m,null,{content:v(()=>[ft,o("div",vt,[l(S,{value:t.tmp_question.answers,responsiveLayout:"scroll",editMode:"row",dataKey:"id",editingRows:t.editingRows,"onUpdate:editingRows":n[3]||(n[3]=e=>t.editingRows=e),onRowEditSave:t.onRowEditSave},{default:v(()=>[l(p,{field:"label_it",header:"Risposte"},{editor:v(({data:e,field:i})=>[l(_,{modelValue:e[i],"onUpdate:modelValue":h=>e[i]=h,autofocus:"",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(p,{field:"tooltip_it",header:"Suggerimento"},{editor:v(({data:e,field:i})=>[l(_,{modelValue:e[i],"onUpdate:modelValue":h=>e[i]=h,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(p,{rowEditor:!0,style:{width:"10%","min-width":"8rem"},bodyStyle:"text-align:center"})]),_:1},8,["value","editingRows","onRowEditSave"])])]),_:1})])])}const bt=M(H,[["render",ht]]);export{bt as default};
